
lookup_8to6_compression = [
    0x00, 0x11, 0x20, 0x31, 0x10, 0x01, 0x30, 0x21,
    0x20, 0x31, 0x00, 0x11, 0x30, 0x21, 0x10, 0x01,
    0x17, 0x06, 0x37, 0x26, 0x07, 0x16, 0x27, 0x36,
    0x37, 0x26, 0x17, 0x06, 0x27, 0x36, 0x07, 0x16,
    0x27, 0x36, 0x07, 0x16, 0x37, 0x26, 0x17, 0x06,
    0x07, 0x16, 0x27, 0x36, 0x17, 0x06, 0x37, 0x26,
    0x30, 0x21, 0x10, 0x01, 0x20, 0x31, 0x00, 0x11,
    0x10, 0x01, 0x30, 0x21, 0x00, 0x11, 0x20, 0x31,
    0x1B, 0x0A, 0x3B, 0x2A, 0x0B, 0x1A, 0x2B, 0x3A,
    0x3B, 0x2A, 0x1B, 0x0A, 0x2B, 0x3A, 0x0B, 0x1A,
    0x0C, 0x1D, 0x2C, 0x3D, 0x1C, 0x0D, 0x3C, 0x2D,
    0x2C, 0x3D, 0x0C, 0x1D, 0x3C, 0x2D, 0x1C, 0x0D,
    0x3C, 0x2D, 0x1C, 0x0D, 0x2C, 0x3D, 0x0C, 0x1D,
    0x1C, 0x0D, 0x3C, 0x2D, 0x0C, 0x1D, 0x2C, 0x3D,
    0x2B, 0x3A, 0x0B, 0x1A, 0x3B, 0x2A, 0x1B, 0x0A,
    0x0B, 0x1A, 0x2B, 0x3A, 0x1B, 0x0A, 0x3B, 0x2A,
    0x2B, 0x3A, 0x0B, 0x1A, 0x3B, 0x2A, 0x1B, 0x0A,
    0x0B, 0x1A, 0x2B, 0x3A, 0x1B, 0x0A, 0x3B, 0x2A,
    0x3C, 0x2D, 0x1C, 0x0D, 0x2C, 0x3D, 0x0C, 0x1D,
    0x1C, 0x0D, 0x3C, 0x2D, 0x0C, 0x1D, 0x2C, 0x3D,
    0x0C, 0x1D, 0x2C, 0x3D, 0x1C, 0x0D, 0x3C, 0x2D,
    0x2C, 0x3D, 0x0C, 0x1D, 0x3C, 0x2D, 0x1C, 0x0D,
    0x1B, 0x0A, 0x3B, 0x2A, 0x0B, 0x1A, 0x2B, 0x3A,
    0x3B, 0x2A, 0x1B, 0x0A, 0x2B, 0x3A, 0x0B, 0x1A,
    0x30, 0x21, 0x10, 0x01, 0x20, 0x31, 0x00, 0x11,
    0x10, 0x01, 0x30, 0x21, 0x00, 0x11, 0x20, 0x31,
    0x27, 0x36, 0x07, 0x16, 0x37, 0x26, 0x17, 0x06,
    0x07, 0x16, 0x27, 0x36, 0x17, 0x06, 0x37, 0x26,
    0x17, 0x06, 0x37, 0x26, 0x07, 0x16, 0x27, 0x36,
    0x37, 0x26, 0x17, 0x06, 0x27, 0x36, 0x07, 0x16,
    0x00, 0x11, 0x20, 0x31, 0x10, 0x01, 0x30, 0x21,
    0x20, 0x31, 0x00, 0x11, 0x30, 0x21, 0x10, 0x01,
]


def __compress_8_to_6(value: int) -> int:
    """Compresses an 8-Bit checksum to 6 bits.
       Do not use this function -> use the lookup table instead

        See A.1.6 Calculation of the checksum

        D5 = D7 xor D5 xor D3 xor D1
        D4 = D6 xor D4 xor D2 xor D0
        D3 = D7 xor D6
        D2 = D5 xor D4
        D1 = D3 xor D2
        D0 = D1 xor D0
    """

    bits = [(value >> i) & 1 for i in range(8)]

    D5 = bits[7] ^ bits[5] ^ bits[3] ^ bits[1]
    D4 = bits[6] ^ bits[4] ^ bits[2] ^ bits[0]
    D3 = bits[7] ^ bits[6]
    D2 = bits[5] ^ bits[4]
    D1 = D3 ^ D2
    D0 = D1 ^ bits[0]

    compressed = (D5 << 5) | (D4 << 4) | (D3 << 3) | (D2 << 2) | (D1 << 1) | D0
    return compressed


def __print_lookup_table():
    values = []
    for i in range(256):
        values.append(__compress_8_to_6(i))

    print("lookup_8to6_compression = [")
    for i in range(0, len(values), 8):
        row = ", ".join(f"0x{x:02X}" for x in values[i:i + 8])
        print(f"    {row},")
    print("]")
